<?xml version="1.0"?>
<project name="luja-dist" default="help">
	<target name="help">
		<echo message="use 'mvn package -Dluja.name=... -Dluja.dirName=... -Dluja.uri=...' instead of ant" />
	</target>

	<target name="finshJar">
		<echo message="name = ${luja.name}${line.separator}" file="target/launcher.properties" append="false" />
		<echo message="dirname = ${luja.dirName}${line.separator}" file="target/launcher.properties" append="true" />
		<echo message="uri = ${luja.uri}${line.separator}" file="target/launcher.properties" append="true" />

		<move tofile="target/luja.tmp" file="target/luja.jar" />
		<jar destfile="target/luja.jar">
			<zipfileset includes="**/*" src="target/luja.tmp" />
            <fileset dir="target" includes="launcher.properties" />
			<manifest>
				<attribute name="Main-Class" value="de.jowisoftware.luja.Main" />
				<attribute name="Build-Date" value="${timestamp}" />
				<attribute name="SCM-Revision" value="${buildNumber}" />
				<attribute name="SCM-Branch" value="${scmBranch}" />
			</manifest>
		</jar>
		<delete file="target/luja.tmp" />
	</target>
</project>